<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Scopefuscator v.1.0.0</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    h1 {
        color: #333;
    }
    .container {
        width: 100%;
        max-width: 800px;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    textarea {
        width: 100%;
        height: 200px;
        margin: 10px 0;
        padding: 10px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 14px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
    }
    button {
        padding: 10px 20px;
        background-color: #28a745;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }
    button:hover {
        background-color: #218838;
    }
    #output {
        width: 100%;
        height: 200px;
        background: #f8f8f8;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-top: 10px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 14px;
        white-space: pre-wrap;
        overflow-x: auto;
    }
</style>
</head>
<body>
<h1>Scopefuscator - LuaU Obfuscator</h1>
<div class="container">
    <label for="inputCode">Enter your LuaU Roblox Script:</label>
    <textarea id="inputCode" placeholder="Paste your LuaU script here..."></textarea>
    <button onclick="obfuscateCode()">Obfuscate</button>
    <label for="output">Obfuscated Code:</label>
    <textarea id="output" readonly></textarea>
</div>

<script>
    function obfuscateLua(source, key) {
        const xor = (data, key) => {
            let res = [];
            for (let i = 0; i < data.length; i++) {
                res.push(String.fromCharCode(data.charCodeAt(i) ^ key));
            }
            return res.join('');
        };
        const toHex = str => {
            let hex = '';
            for (let i = 0; i < str.length; i++) {
                hex += ('0' + str.charCodeAt(i).toString(16)).slice(-2);
            }
            return hex.toUpperCase();
        };

        const encrypted = xor(source, key);
        const hexEnc = toHex(encrypted);

        // Generate very long nonsense with random vars and junk
        const nonsenseParts = [];
        const nonsenseWords = ["_G","randomString","junkVar","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"];
        for(let i=0; i<150; i++){
            let word = nonsenseWords[Math.floor(Math.random()*nonsenseWords.length)];
            let val = Math.floor(Math.random()*10000);
            nonsenseParts.push(`local ${word}${i}=${val}`);
        }
        for(let i=0; i<100; i++){
            let w1 = nonsenseWords[Math.floor(Math.random()*nonsenseWords.length)]+Math.floor(Math.random()*150);
            let w2 = nonsenseWords[Math.floor(Math.random()*nonsenseWords.length)]+Math.floor(Math.random()*150);
            nonsenseParts.push(`${w1}=${w2} or ${Math.floor(Math.random()*5000)}`);
        }
        nonsenseParts.push(
            `function scoperIsTheBest() print("Scoper is the best! scoper can make obfuscaty, haha, lol, omg, smh!") end`,
            `function uselessFunc1(x) return x*x*x end`,
            `function uselessFunc2() local a="fuck"; return a end`,
            `function ad_joke() print("Buy our shit! Totally not a scam!") end`,
            `function confuse() for i=1,5 do local tmp=i*i*42 end end`
        );
        const nonsense = nonsenseParts.join(";") + ";";

        // VM + anti-tamper + XOR + decode + run all in one line without breaks
        // Anti-tamper: check debug info length (simple example)
        const coreCode = `
local debug = debug
if not debug or type(debug.getinfo) ~= "function" or #debug.getinfo(1).source < 1 then error("Tampering detected") end
local bit32=bit32 or require("bit32")
local function xor(d,k)local r={}for i=1,#d do r[i]=string.char(bit32.bxor(d:byte(i),k))end return table.concat(r)end
local function from_hex(h)return(h:gsub('..',function(cc)return string.char(tonumber(cc,16))end))end
local hex_enc=${JSON.stringify(hexEnc)}
local key=${key}
local encrypted=from_hex(hex_enc)
local decrypted=xor(encrypted,key)
local f,err=loadstring(decrypted)
if not f then error(err) end
return f()
`.replace(/\n\s+/g,' ');

        return `-- Scopefuscator\n${nonsense}${coreCode}`;
    }

    function obfuscateCode() {
        const input = document.getElementById('inputCode').value;
        if (!input) {
            document.getElementById('output').value = '-- Please enter LuaU code to obfuscate.';
            return;
        }
        const key = 0xAA;
        try {
            const obfuscated = obfuscateLua(input, key);
            document.getElementById('output').value = obfuscated;
        } catch (e) {
            document.getElementById('output').value = '-- Error during obfuscation: ' + e.message;
        }
    }
</script>
</body>
</html>
